(this.webpackJsonpthe=this.webpackJsonpthe||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n.n(o),i=(n(21),n(2)),u=function(e){var t=e.persons,n=e.setPersons,r=e.newFilter,o=e.setNewFilter;return a.a.createElement("div",null,"filter shown with",a.a.createElement("input",{value:r,onChange:function(e){o(e.target.value),n(t.filter((function(t){return t.name.trim().toLowerCase().includes(e.target.value.trim().toLowerCase())})))}}))},s=n(15),l=n(4),d=n(3),f=n.n(d),m="/api/persons",b=function(){return f.a.get(m).then((function(e){return e.data}))},p=function(e){return f.a.post(m,e).then((function(e){return e.data}))},h=function(e,t){return f.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=function(e){var t=e.persons,n=e.setPersons,o=e.setNewFilter,c=e.setFilteredPersons,u=e.setMessage,d=e.setError,f=Object(r.useState)(""),m=Object(i.a)(f,2),b=m[0],g=m[1],O=Object(r.useState)(""),E=Object(i.a)(O,2),j=E[0],w=E[1];return a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r={name:b,number:j},a=[r].concat(Object(l.a)(t)).filter((function(e){return e.name===r.name}));if(a.length>=2){if(!0===window.confirm("".concat(b," is already added to phonebook,replace the old number with a new one?"))){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.find((function(e){return e.id===a[1].id})),{number:j});h(a[1].id,i).then((function(e){n(t.map((function(t){return t.id!==a[1].id?t:e}))),c(t.map((function(t){return t.id!==a[1].id?t:e}))),u("Number changed ".concat(e.name)),setTimeout((function(){u(null)}),5e3)}))}}else p(r).then((function(e){n(t.concat(e)),c(t.concat(e)),u("Added ".concat(e.name)),setTimeout((function(){u(null)}),5e3)})).catch((function(e){d(!0),u(e.response.data.error)})),g(""),w(""),o("")}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:b,onChange:function(e){g(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:j,onChange:function(e){w(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},E=function(e){var t=e.newFilteredPersons,n=e.persons,r=e.setPersons,o=e.setFilteredPersons,c=e.setError,i=e.setMessage;return a.a.createElement("div",null,t.map((function(e){return a.a.createElement("div",{key:e.id},e.name,"  ",e.number,a.a.createElement("button",{onClick:function(){return function(e){var t=n.filter((function(t){return t.id===e}));if(!0===window.confirm("Delete ".concat(t[0].name,"?"))){var a=n.filter((function(t){return t.id!==e})),u=Object(l.a)(a);g(e).then((function(e){r(u),o(u)})).catch((function(e){c(!0),i("Information of ".concat(t.name," has alread been removed from the server"))}))}}(e.id)}},"delete"))})))},j=function(e){var t=e.message,n=e.error;return null===t?null:!0===n?a.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},t):a.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},t)},w=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(n),s=Object(i.a)(c,2),l=s[0],d=s[1],f=Object(r.useState)(""),m=Object(i.a)(f,2),p=m[0],h=m[1],g=Object(r.useState)(null),v=Object(i.a)(g,2),w=v[0],y=v[1],P=Object(r.useState)(!1),S=Object(i.a)(P,2),F=S[0],k=S[1];return Object(r.useEffect)((function(){b().then((function(e){o(e),d(e)}))}),[]),a.a.createElement("div",null,a.a.createElement(j,{message:w,error:F}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(u,{persons:n,setPersons:d,newFilter:p,setNewFilter:h}),a.a.createElement("h3",null,"add a new"),a.a.createElement(O,{persons:n,setPersons:o,setNewFilter:h,setFilteredPersons:d,setMessage:y,setError:k}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(E,{newFilteredPersons:l,persons:n,setPersons:o,setFilteredPersons:d,setError:k,setMessage:y}))};c.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.17b399e8.chunk.js.map